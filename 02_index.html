<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Grupo Erupci贸n - Al Calor de la Cumbia</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Font Google -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #121212; /* Spotify Dark */
            color: white;
            overflow-x: hidden;
        }
        
        /* Ocultar barra de scroll pero permitir funcionalidad */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Estilos para el rango (slider) */
        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 12px;
            width: 12px;
            border-radius: 50%;
            background: #fff;
            margin-top: -4px;
            box-shadow: 0 0 4px rgba(0,0,0,0.5);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #4b5563;
            border-radius: 2px;
        }
        input[type=range]:focus {
            outline: none;
        }

        /* Animaci贸n de disco girando */
        .spin-slow {
            animation: spin 8s linear infinite;
        }
        .spin-paused {
            animation-play-state: paused;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Efecto vinilo */
        .vinyl-grooves {
            background: 
                radial-gradient(circle, #1a1a1a 40%, transparent 41%),
                repeating-radial-gradient(#222 0, #222 2px, #111 3px, #111 4px);
        }
    </style>
</head>
<body class="flex justify-center min-h-screen bg-gradient-to-br from-red-900 via-gray-900 to-black">

    <!-- App Container (Simula un m贸vil en pantallas grandes) -->
    <div class="w-full max-w-md h-screen bg-black/40 backdrop-blur-xl relative shadow-2xl overflow-hidden flex flex-col border-x border-white/10">
        
        <!-- Header / Top Bar -->
        <div class="px-6 py-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent z-10">
            <i data-lucide="chevron-down" class="text-white w-6 h-6 cursor-pointer"></i>
            <span class="text-xs font-bold tracking-widest text-red-400 uppercase">Reproduciendo desde lbum</span>
            <i data-lucide="more-horizontal" class="text-white w-6 h-6 cursor-pointer"></i>
        </div>

        <!-- Main Content Area (Scrollable) -->
        <div id="main-scroll" class="flex-1 overflow-y-auto no-scrollbar pb-40">
            
            <!-- Album Art Area -->
            <div class="px-8 pt-4 pb-8 flex flex-col items-center justify-center">
                <div id="album-cover" class="w-64 h-64 rounded-full shadow-2xl shadow-red-900/50 border-4 border-gray-800 relative flex items-center justify-center overflow-hidden vinyl-grooves spin-slow spin-paused transition-all duration-500">
                    <!-- Centro del vinilo / Portada -->
                    <div class="absolute w-24 h-24 bg-red-600 rounded-full flex items-center justify-center border-4 border-black z-10">
                        <i data-lucide="music" class="text-black w-10 h-10"></i>
                    </div>
                    <!-- Brillo -->
                    <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-tr from-white/10 to-transparent rounded-full pointer-events-none"></div>
                </div>
            </div>

            <!-- Song Info -->
            <div class="px-6 mb-2">
                <div class="flex justify-between items-end">
                    <div>
                        <h1 id="track-title" class="text-2xl font-bold text-white leading-tight mb-1 line-clamp-2">Selecciona una canci贸n</h1>
                        <p class="text-gray-400 text-sm">Grupo Erupci贸n de Malalhue</p>
                    </div>
                    <button id="like-btn" class="transform transition hover:scale-110 active:scale-90">
                        <i data-lucide="heart" class="text-gray-400 w-6 h-6 hover:text-red-500 transition-colors"></i>
                    </button>
                </div>
            </div>

            <!-- Band Credits -->
            <div class="px-6 mt-4 mb-6">
                <div class="bg-white/5 rounded-xl p-3 text-xs text-gray-400 border border-white/5">
                    <p class="font-semibold text-red-400 mb-1">Integrantes:</p>
                    <ul class="space-y-1">
                        <li> Vildo Salazar <span class="opacity-50">(Compositor, Teclados)</span></li>
                        <li> Heraldo Villablanca <span class="opacity-50">(Guitarras)</span></li>
                        <li> Ruben Salazar Fritz <span class="opacity-50">(Bajo)</span></li>
                    </ul>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="px-6 mb-4">
                <input type="range" id="progress-bar" value="0" class="w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer mb-2">
                <div class="flex justify-between text-xs text-gray-400 font-mono">
                    <span id="current-time">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>

            <!-- Main Controls -->
            <div class="px-6 flex justify-between items-center mb-8">
                <button class="text-gray-400 hover:text-white transition"><i data-lucide="shuffle" class="w-5 h-5"></i></button>
                <button id="prev-btn" class="text-white hover:text-red-400 transition transform active:scale-90"><i data-lucide="skip-back" class="w-8 h-8 fill-current"></i></button>
                
                <!-- Play/Pause Button Container -->
                <button id="play-pause-btn" class="bg-white text-black rounded-full p-4 hover:scale-105 transition shadow-lg shadow-white/20 transform active:scale-95 flex items-center justify-center w-16 h-16">
                    <i data-lucide="play" class="w-8 h-8 fill-current ml-1" id="play-icon"></i>
                </button>
                
                <button id="next-btn" class="text-white hover:text-red-400 transition transform active:scale-90"><i data-lucide="skip-forward" class="w-8 h-8 fill-current"></i></button>
                <button class="text-gray-400 hover:text-white transition"><i data-lucide="repeat" class="w-5 h-5"></i></button>
            </div>

            <!-- Action Tabs -->
            <div class="px-6 flex gap-2 mb-6 overflow-x-auto no-scrollbar">
                <button onclick="switchTab('playlist')" class="tab-btn bg-red-600 text-white px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition" id="tab-playlist">Lista</button>
                <button onclick="switchTab('lyrics')" class="tab-btn bg-white/10 text-gray-300 px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap hover:bg-white/20 transition" id="tab-lyrics">Letra</button>
                <button onclick="switchTab('comments')" class="tab-btn bg-white/10 text-gray-300 px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap hover:bg-white/20 transition" id="tab-comments">Comentarios</button>
            </div>

            <!-- Dynamic Content Section -->
            <div class="px-6 pb-6 min-h-[200px]">
                
                <!-- Playlist View -->
                <div id="view-playlist" class="space-y-2">
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-3">Canciones (12)</h3>
                    <div id="playlist-container" class="space-y-1">
                        <!-- JS injected songs -->
                    </div>
                </div>

                <!-- Lyrics View (Hidden by default) -->
                <div id="view-lyrics" class="hidden text-center space-y-4 animate-fade-in">
                    <h3 class="text-xl font-bold text-red-400">Letra de la canci贸n</h3>
                    <div class="p-6 bg-white/5 rounded-2xl border border-white/5 shadow-inner min-h-[200px] flex items-center justify-center">
                        <p class="text-gray-300 italic leading-relaxed">
                            (Las letras estar谩n disponibles pronto)<br>
                            Disfruta del ritmo de la cumbia sure帽a...<br>
                               
                        </p>
                    </div>
                </div>

                <!-- Comments View (Hidden by default) -->
                <div id="view-comments" class="hidden space-y-4 animate-fade-in">
                    <div class="bg-white/5 p-4 rounded-xl border border-white/5">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center font-bold">A</div>
                            <div>
                                <p class="text-sm font-bold">Ana P茅rez</p>
                                <p class="text-xs text-gray-400">Hace 2 horas</p>
                            </div>
                        </div>
                        <p class="text-sm text-gray-200">隆Qu茅 buena cumbia! Saludos desde Malalhue </p>
                        <div class="flex gap-4 mt-2 text-xs text-gray-400">
                            <span class="hover:text-white cursor-pointer">Me gusta</span>
                            <span class="hover:text-white cursor-pointer">Responder</span>
                        </div>
                    </div>

                    <div class="bg-white/5 p-4 rounded-xl border border-white/5">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center font-bold">J</div>
                            <div>
                                <p class="text-sm font-bold">Juan Carlos</p>
                                <p class="text-xs text-gray-400">Hace 1 d铆a</p>
                            </div>
                        </div>
                        <p class="text-sm text-gray-200">Grande Grupo Erupci贸n, los mejores temas 葛</p>
                    </div>
                    
                    <button class="w-full py-3 bg-white/10 rounded-xl text-sm font-semibold hover:bg-white/20 transition">Escribir un comentario...</button>
                </div>
            </div>
        </div>

        <!-- Custom Toast Notification -->
        <div id="toast" class="absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-4 py-2 rounded-full shadow-xl text-sm font-semibold opacity-0 transition-opacity duration-300 pointer-events-none z-50">
            Mensaje
        </div>

        <!-- Audio Element (Hidden) -->
        <audio id="audio-player"></audio>
    </div>

    <script>
        // Inicializar iconos
        lucide.createIcons();

        // Configuraci贸n del Repositorio
        const REPO_URL = "https://raw.githubusercontent.com/soporteaiwis-lab/erupcion/main/";
        
        // Playlist Data
        const playlist = [
            { title: "Eres T煤", file: "01_ERES TU - Grupo Erupci贸n.mp3" },
            { title: "T煤 y Yo", file: "02_TU Y YO - Grupo Erupci贸n.mp3" },
            { title: "Vete Vete", file: "03_VETE VETE - Grupo Erupci贸n.mp3" },
            { title: "Vuelve Pronto", file: "04_VUELVE PRONTO - Grupo Erupci贸n.mp3" },
            { title: "Nunca M谩s", file: "05_NUNCA MAS - Grupo Erupci贸n.mp3" },
            { title: "Perd贸name Amor", file: "06_PERDONAME AMOR - Grupo Erupci贸n.mp3" },
            { title: "Te Amo", file: "07_TE AMO - Grupo Erupci贸n.mp3" },
            { title: "No Resistir茅", file: "08_NO RESISTIRE - Grupo Erupci贸n.mp3" },
            { title: "Una Diosa", file: "09_UNA DIOSA- Grupo Erupci贸n.mp3" },
            { title: "Mi Reina", file: "10_MI REINA - Grupo Erupci贸n.mp3" },
            { title: "Chica Hermosa", file: "11_CHICA HERMOSA- Grupo Erupci贸n.mp3" },
            { title: "Mentirosa", file: "12_MENTIROSA - Grupo Erupci贸n.mp3" }
        ];

        // Elementos del DOM
        const audio = document.getElementById('audio-player');
        const playBtn = document.getElementById('play-pause-btn');
        const playIcon = document.getElementById('play-icon');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progress = document.getElementById('progress-bar');
        const currTimeEl = document.getElementById('current-time');
        const durTimeEl = document.getElementById('duration');
        const trackTitle = document.getElementById('track-title');
        const albumCover = document.getElementById('album-cover');
        const playlistContainer = document.getElementById('playlist-container');
        const likeBtn = document.getElementById('like-btn');
        const likeIcon = likeBtn.querySelector('i');

        let songIndex = 0;
        let isPlaying = false;

        // Cargar canci贸n inicial
        loadSong(playlist[songIndex]);

        // Generar lista de reproducci贸n visual
        playlist.forEach((song, index) => {
            const item = document.createElement('div');
            item.className = `flex items-center justify-between p-3 rounded-lg hover:bg-white/10 cursor-pointer transition group ${index === 0 ? 'bg-white/10' : ''}`;
            item.onclick = () => playSpecificSong(index);
            item.innerHTML = `
                <div class="flex items-center gap-3">
                    <span class="text-gray-500 font-mono text-xs w-4">${index + 1}</span>
                    <div class="text-sm">
                        <p class="text-white font-medium ${index === 0 ? 'text-red-400' : 'group-hover:text-red-400'} transition-colors">${song.title}</p>
                        <p class="text-xs text-gray-500">Grupo Erupci贸n</p>
                    </div>
                </div>
                ${index === 0 ? '<i data-lucide="bar-chart-2" class="w-4 h-4 text-red-500 animate-pulse"></i>' : ''}
            `;
            playlistContainer.appendChild(item);
        });
        lucide.createIcons();

        // Funciones del Reproductor
        function loadSong(song) {
            trackTitle.innerText = song.title;
            // Codificar URL para manejar espacios y caracteres especiales
            const encodedFile = encodeURIComponent(song.file).replace(/%20/g, '%20'); 
            audio.src = REPO_URL + encodedFile;
            
            // Actualizar resaltado en lista
            updatePlaylistHighlight();
        }

        function playSong() {
            isPlaying = true;
            playBtn.innerHTML = '<i data-lucide="pause" class="w-8 h-8 fill-current ml-0"></i>';
            lucide.createIcons();
            albumCover.classList.remove('spin-paused');
            audio.play().catch(error => {
                showToast("Error al cargar audio. Verifica conexi贸n.");
                console.error("Error playing:", error);
            });
        }

        function pauseSong() {
            isPlaying = false;
            playBtn.innerHTML = '<i data-lucide="play" class="w-8 h-8 fill-current ml-1"></i>';
            lucide.createIcons();
            albumCover.classList.add('spin-paused');
            audio.pause();
        }

        function prevSong() {
            songIndex--;
            if (songIndex < 0) {
                songIndex = playlist.length - 1;
            }
            loadSong(playlist[songIndex]);
            if(isPlaying) playSong();
            else playSong(); // Auto-play al cambiar
        }

        function nextSong() {
            songIndex++;
            if (songIndex > playlist.length - 1) {
                songIndex = 0;
            }
            loadSong(playlist[songIndex]);
            if(isPlaying) playSong();
            else playSong(); // Auto-play al cambiar
        }

        function playSpecificSong(index) {
            songIndex = index;
            loadSong(playlist[songIndex]);
            playSong();
        }

        function updateProgress(e) {
            const { duration, currentTime } = e.srcElement;
            const progressPercent = (currentTime / duration) * 100;
            progress.value = progressPercent || 0;
            
            // Tiempo actual
            let min = Math.floor(currentTime / 60);
            let sec = Math.floor(currentTime % 60);
            if(sec < 10) sec = '0' + sec;
            currTimeEl.innerText = `${min}:${sec}`;

            // Duraci贸n total
            if(duration) {
                let minD = Math.floor(duration / 60);
                let secD = Math.floor(duration % 60);
                if(secD < 10) secD = '0' + secD;
                durTimeEl.innerText = `${minD}:${secD}`;
            }
        }

        function setProgress(e) {
            const width = this.value;
            const duration = audio.duration;
            audio.currentTime = (width / 100) * duration;
        }

        function updatePlaylistHighlight() {
            const items = playlistContainer.children;
            for(let i=0; i<items.length; i++) {
                if(i === songIndex) {
                    items[i].classList.add('bg-white/10');
                    items[i].querySelector('p').classList.add('text-red-400');
                    // A帽adir icono indicador si no existe
                    if(!items[i].querySelector('.animate-pulse')) {
                        items[i].innerHTML = items[i].innerHTML.replace('</div>', '</div><i data-lucide="bar-chart-2" class="w-4 h-4 text-red-500 animate-pulse"></i>');
                        lucide.createIcons();
                    }
                } else {
                    items[i].classList.remove('bg-white/10');
                    items[i].querySelector('p').classList.remove('text-red-400');
                    // Remover icono
                    const icon = items[i].querySelector('.animate-pulse');
                    if(icon) icon.remove();
                }
            }
        }

        // Manejador de Tabs
        function switchTab(tabName) {
            const views = ['playlist', 'lyrics', 'comments'];
            const tabs = ['tab-playlist', 'tab-lyrics', 'tab-comments'];

            views.forEach(v => {
                const el = document.getElementById('view-' + v);
                if(v === tabName) {
                    el.classList.remove('hidden');
                } else {
                    el.classList.add('hidden');
                }
            });

            tabs.forEach(t => {
                const btn = document.getElementById(t);
                if(t === 'tab-' + tabName) {
                    btn.classList.remove('bg-white/10', 'text-gray-300');
                    btn.classList.add('bg-red-600', 'text-white');
                } else {
                    btn.classList.add('bg-white/10', 'text-gray-300');
                    btn.classList.remove('bg-red-600', 'text-white');
                }
            });
        }

        // Like Button Logic
        let liked = false;
        likeBtn.addEventListener('click', () => {
            liked = !liked;
            if(liked) {
                likeIcon.classList.add('text-red-500', 'fill-current');
                likeIcon.classList.remove('text-gray-400');
                showToast("隆A帽adido a Me Gusta!");
            } else {
                likeIcon.classList.remove('text-red-500', 'fill-current');
                likeIcon.classList.add('text-gray-400');
            }
        });

        // Toast Notification
        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.classList.remove('opacity-0');
            setTimeout(() => {
                toast.classList.add('opacity-0');
            }, 3000);
        }

        // Event Listeners
        playBtn.addEventListener('click', () => {
            isPlaying ? pauseSong() : playSong();
        });

        prevBtn.addEventListener('click', prevSong);
        nextBtn.addEventListener('click', nextSong);
        audio.addEventListener('timeupdate', updateProgress);
        audio.addEventListener('ended', nextSong);
        progress.addEventListener('input', setProgress);

        // Error handling para audio
        audio.addEventListener('error', (e) => {
            console.error("Error loading audio", e);
            showToast("Error: No se pudo cargar el audio del servidor.");
            pauseSong();
        });

    </script>
</body>
</html>
